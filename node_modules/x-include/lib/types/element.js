var isNode = function (o){
  return o && (typeof o === 'object') && (typeof window.Node === 'object') ? o instanceof window.Node : (typeof o.nodeType === 'number' && typeof o.nodeName === 'string');
};

var ElementLoader = {
  load: function(options, done) {
    if( isNode(options.src) ) options.src = [options.src];
    
    var src = [];
    [].forEach.call(options.src, function(node) {
      src.push(node);
    });
    
    done(null, src);
  },
  render: function(options, done) {
    var loaded = options.loaded;
    var target = options.target;
    
    [].slice.call(target.childNodes).forEach(function(child) {
      target.removeChild(child);
    });
    
    [].forEach.call(loaded, function(child) {
      target.appendChild(child);
    });
    
    if( options.title && options.changeTitle ) document.title = options.title;
    
    done();
  }
};

module.exports = ElementLoader;